---
layout: post
title: 大数据平台的技术演进与实践
categories: [Machine Learning, Big Data]
tags: [bigdata]
keywords: [bigdata]
---

- **[58大数据平台](https://mp.weixin.qq.com/s?__biz=MzA5NzkxMzg1Nw==&mid=2653162187&idx=1&sn=d10f63b9489e18733838cf6c4489282d&chksm=8b4937a5bc3ebeb3811ec69bd3aad214ef730b08721ff70223e36f1efb53e14f7478a485df04#rd)**

<p><img src="http://785j7b.com1.z0.glb.clouddn.com/58tongcheng.webp" alt=""/></p>

58大数据平台架构大的方面来说分为三层：数据基础平台层、数据应用平台层、数据应用层，还有两列监控与报警和平台管理。

数据基础平台层又分为四个子层：
- 接入层，包括了Canal/Sqoop（主要解决数据库数据接入问题）、还有大量的数据采用Flume解决方案；
- 存储层，典型的系统HDFS（文件存储）、HBase（KV存储）、Kafka（消息缓存）；
- 再往上就是调度层，这个层次上我们采用了Yarn的统一调度以及Kubernetes的基于容器的管理和调度的技术；
- 再往上是计算层，包含了典型的所有计算模型的计算引擎，包含了MR、HIVE、Storm、Spark、Kylin以及深度学习平台比如Caffe、Tensorflow等等。

数据应用平台主要包括以下功能：
- 元信息管理，还有针对所有计算引擎、计算引擎job的作业管理，之后就是交互分析、多维分析以及数据可视化的功能。
- 再往上是支撑58集团的数据业务，比如说流量统计、用户行为分析、用户画像、搜索、广告等等。
- 针对业务、数据、服务、硬件要有完备的检测与报警体系。
- 平台管理方面，需要对流程、权限、配额、升级、版本、机器要有很全面的管理平台。

<p><img src="http://785j7b.com1.z0.glb.clouddn.com/58tongcheng-1.webp"/></p>

这个图展示的是架构图中所包含的系统数据流动的情况。分为两个部分：

首先是实时流，就是黄色箭头标识的这个路径。数据实时采集过来之后首先会进入到Kafka平台，先做缓存。实时计算引擎比如Spark streaming或storm会实时的从Kafka中取出它们想要计算的数据。经过实时的处理之后结果可能会写回到Kafka或者是形成最终的数据存到MySQL或者HBase，提供给业务系统，这是一个实时路径。

对于离线路径，通过接入层的采集和收集，数据最后会落到HDFS上，然后经过Spark、MR批量计算引擎处理甚至是机器学习引擎的处理。其中大部分的数据要进去数据仓库中，在数据仓库这部分是要经过数据抽取、清洗、过滤、映射、合并汇总，最后聚合建模等等几部分的处理，形成数据仓库的数据。然后通过HIVE、Kylin、SparkSQL这种接口将数据提供给各个业务系统或者我们内部的数据产品，有一部分还会流向MySQL。以上是数据在大数据平台上的流动情况。
